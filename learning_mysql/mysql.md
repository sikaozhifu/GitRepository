#### MySQL常用存储引擎MyISAM：

- 表级锁：

  读写互斥；

- 表损坏修复：

  check table tablename；

  repair table tablename；

- 支持全文本索引

- 支持压缩

- 适用场景：

  非事务型应用；

  只读类应用；

  空间类应用；

#### MySQL常用存储引擎InnoDB：

​	MySQL5.5及之后版本默认存储引擎

- 支持事务（ACID）：

  Redo Log和Undo Log


- 行级锁：

  可以最大程度支持并发；

  由存储引擎层实现的

- 状态检查：

  show engine innodb status

- 适用场景：

  - 适合于大多数OLTP应用

    全文索引，空间函数（5.7之后支持）

- 使用表空间进行数据存储：

  innodb_file_per_table

  ON：独立表空间：tablename.idb；

  OFF：系统表空间：ibdataX

  比较：

  - 系统表空间无法简单的收缩文件大小
  - 独立表空间可以通过optimize table命令收缩系统文件
  - 系统表空间会产生IO瓶颈
  - 独立表空间可以同时向多个文件刷新数据

#### 锁的类型：

- 共享锁（读锁）
- 独占锁（写锁）

|      |  写锁  |  读锁  |
| :--: | :----: | :----: |
| 写锁 | 不兼容 | 不兼容 |
| 读锁 | 不兼容 |  兼容  |

#### 锁的粒度：

- 表级锁；
- 行级锁；

#### 数据库设计对性能的影响：

 * 过分的反范式化为表建立太多的列；
 * 过分的范式化造成太多的表关联；
 * 在OLTP（联机事务处理过程，也称面向交易的处理过程）环境中使用不恰当的分区表；
 * 使用外键保证数据的完整性。

#### MySQL支持的索引类型：

 * B-tree索引：

   以B+树的结构存储数据；

   加快数据的查找速度；

   更适合进行范围查找（顺序存储）；

   适用条件：

    * 全值匹配的查询

      order_sn='98764321000'

    * 匹配最左前缀的查询

    * 匹配列前缀查询

      order_sn like ''9876%'

   * 匹配范围值的查询

     order_sn>'98764321000'

     and order_sn<'9876111111'

   * 精确匹配左前列并范围匹配另外一列

   * 只访问索引的查询

   使用限制：

    * 如果不是按照索引最左列开始查找，则无法使用索引；
    * 使用索引时不能跳过索引中的列；
    * Not in 和<> 操作无法使用索引；
    * 如果查询中有某个列的范围查询，则其右边所有列都无法使用索引；

* Hash索引：

  Hash索引是基于Hash表实现的，只有查询条件精确匹配Hash索引中的所有列时，才能够使用到hash索引。即等值查询。

  使用限制：

   * 需要进行两次查找；
   * 无法用于排序；
   * 不支持部分索引查找也不支持范围查找；
   * 索引中Hash码的计算可能存在Hash冲突。

#### 使用索引：

 * 索引大大减少了存储引擎需要扫描的数据量；
 * 索引可以帮助我们进行排序以避免使用临时表；
 * 索引可以把随机I/O变为顺序I/O；

#### 索引优化策略：

 * 索引列上不能使用表达式或者函数：

 * 前缀索引和索引列的选择性；

   索引的选择性是 不重复的索引值和表的记录数的比值；

* 联合索引：

   * 经常会被使用到的列优先；
   * 选择性高的列优先；
   * 宽度小的列优先。

* 覆盖索引：

  可以优化缓存，减少磁盘IO操作；

  可以减少随机IO，变随机IO操作为顺序IO操作；

  可以避免对InnoDB主键索引的二次查询；

  可以避免MyISAM表进行系统调用；

* 使用索引扫描来优化排序：

  索引的列顺序和Order By子句的顺序完全一致

  索引中的所有列的方向（升序、降序）和Order By子句完全一致

  Order By中的字段全部在关联表中的第一张表中

* 模拟Hash索引优化查询：

  只能处理键值的全值匹配查找；

  所使用的Hash函数决定着索引键的大小

* 索引创建：

   ```mysql
   REATE [UNIQUE|CLUSTERED] INDEX INDEX_NAME ON TABLE_NAME(PROPERTY_NAME);
   ```

   其中UNIQUE和CLUSTERED为可选项，分别是建立唯一索引和聚簇索引，具体解释为：

   UNIQUE:表示此索引的每一个索引值只对应唯一的数据。

   CLUSTERED:表示要建立的索引是聚簇索引，即索引项的顺序与表中记录的物理顺序一致的索引组织。

   ​

​